<div class="inside_banner text-center">
    <h3>CONTACT US</h3>
    <p>explore • enjoy • shop</p>
</div>
<div class="store_list_head main_container">
    <div class="row hidden_phone">
        <div class="col-md-4">
            <h5 class="active_heading">CONTACT US</h5>
        </div>
        <div class="col-md-4">
            <h5><a href="/directions">DIRECTIONS</a></h5>
        </div>
        <div class="col-md-4">
            <h5><a href="/leasing">LEASING</a></h5>
        </div>
    </div>
    <h5 class="text-center tap_here show_phone">
        <select id="option_selector" class="link_selector">
            <option value="" disabled selected>TAP FOR MORE OPTIONS</option>
            <option value="/directions">Directions</option>
            <option value="/leasing">Leasing</option>
        </select>
    </h5>
</div>
<div class="margin_20"></div>
<div class="content_container main_container mobile_padding">
    <div class="margin_25_across">
        <div class="row">
            <div class="col-md-8">
                <h2 class="margin_30">Welcome to Devonshire Mall</h4>
                <p>Feel free to drop us a line!</p>
                <br>
                <div id="send_contact_success" class="alert alert-success hidden_now" role="alert">
                    <span class="glyphicon glyphicon-ok" aria-hidden="true"></span>
                    <span class="sr-only">Success</span>
                    Thank you for contacting us. A member from our team will contact you shortly.
                </div>
                <div id="send_contact_error" class="alert alert-danger hidden_now" role="alert">
                    <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                    <span class="sr-only">Error:</span>
                    There was an error when trying to submit your request. Please ensure you have entered a valid email address and subject and please try again.
                </div>
                <form name="contact_form" id="contact_form" method="post">
                    <div class="row">
                        <div class="col-md-6 margin_30">
                            <input name="name" id="name" class="form-control" type="text" value="" placeholder="Your Name" required>
                        </div>    
                        <div class="col-md-6 margin_30">
                            <input name="email" id="email" class="form-control" type="text" value="" placeholder="Your Email" required>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12 margin_30">
                            <input name="subject" id="subject" class="form-control" type="text" placeholder="Subject" required>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12 margin_30">
                            <textarea name="message" id="message" rows="8" class="form-control" placeholder="Your Message" required></textarea>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12 margin_30">
                            <button id="submit" class="newsletter_btn animated_btn" type="submit">SUBMIT</button>
                        </div>
                    </div>
                </form>
            </div>
            <div class="col-md-4">
                <div id="mm_page_content">
                    Content
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(document).ready(function(e){
        init(e);
        function renderAll(){
            var pathArray = window.location.pathname.split( '/' );
            var slug = pathArray[pathArray.length-1];
            prefix = get_prefix();
            var pages_json = prefix + "/pages/devonshire-contact-us.json"
            $.getJSON(pages_json).done(function(data) {
                $('#mm_page_content').html(data.body);
            }).fail(function(jqXHR) {
                if (jqXHR.status == 404) {
                    $("#404_msg").fadeIn("fast");
                }
            }); 
            var contact_json = prefix + "/pages/devonshire-contact-info.json"
            $.getJSON(contact_json).done(function(data) {
                $('#mm_page_content_contact').html(data.body);
            }).fail(function(jqXHR) {
                if (jqXHR.status == 404) {
                    $("#404_msg").fadeIn("fast");
                }
            }); 
            show_content();
            
            $('#contact_form').submit(function(e) {
                values = [];
                values = JSON.stringify($('#contact_form').serializeArray());
                e.preventDefault();
                $.ajax({
                    url : "/api/v1/contact_us",
                    type: "POST",
                    data : {authenticity_token: '<%=form_authenticity_token%>' ,
                    form_data:values},
                    success: function(data, textStatus, jqXHR) {
                        $('html, body').animate({scrollTop : 0}, 800);
                        $('#send_contact_success').fadeIn();
                        $('#contact_form').find("input[type=text], textarea").val("");
                        
                    },
                    error: function (jqXHR, textStatus, errorThrown) {
                        $('html, body').animate({scrollTop : 0},800);
                        $('#send_contact_error').fadeIn();
                    }
                });
    		});
        }
        loadMallDataCached(renderAll); 
    })
</script>